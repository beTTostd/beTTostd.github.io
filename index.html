<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Resize and Crop Images</title>
</head>
<body>
  <h2>Redimensionar e cortar imagens para 1000x1000</h2>
  <input type="file" id="fileInput" multiple accept="image/*">
  <div id="result"></div>

  <script>
    const fileInput = document.getElementById('fileInput');
    const resultDiv = document.getElementById('result');

    fileInput.addEventListener('change', handleFiles);

    function handleFiles() {
      const files = Array.from(fileInput.files);
      resultDiv.innerHTML = '';

      files.forEach(file => {
        const reader = new FileReader();
        reader.onload = function(event) {
          const img = new Image();
          img.onload = function() {
            const size = Math.min(img.width, img.height);
            const offsetX = (img.width - size) / 2;
            const offsetY = (img.height - size) / 2;

            const canvas = document.createElement('canvas');
            canvas.width = 1000;
            canvas.height = 1000;
            const ctx = canvas.getContext('2d');

            // Desenhar imagem cortada e redimensionada
            ctx.drawImage(
              img,
              offsetX, offsetY, size, size, // origem (crop)
              0, 0, 1000, 1000              // destino (resize)
            );

            // Criar link para download
            canvas.toBlob(blob => {
              const url = URL.createObjectURL(blob);
              const link = document.createElement('a');
              link.href = url;
              link.download = 'imagem_1000x1000_' + file.name;
              link.textContent = 'Download ' + file.name;
              link.style.display = 'block';
              resultDiv.appendChild(link);
            }, 'image/jpeg');
          };
          img.src = event.target.result;
        };
        reader.readAsDataURL(file);
      });
    }
  </script>
</body>
</html>
